(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{57:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){},60:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(1),s=n.n(a),i=n(32),o=n.n(i),l=n(19),r=n(22),d=n(8),u=n(2),j=n(11),m=n(4),h=n.n(m),b=n(16),f=n.n(b),p=n.p+"static/media/remove.f5660af3.svg",v=n(15),k=(n(57),function(t){var e=t.color,n=t.onClick,a=t.className;return Object(c.jsx)("i",{onClick:n,className:f()("badge",Object(v.a)({},"badge--".concat(e),e),a)})}),O=(n(58),function(t){var e=t.items,n=t.isRemovable,a=t.onClick,s=t.onRemove,i=t.onClickItem,o=t.activeItem;return Object(c.jsx)("ul",{className:"list",onClick:a,children:e.map((function(t,e){return Object(c.jsxs)("li",{className:f()(t.className,{active:t.active?t.active:o&&o.id===t.id}),onClick:i?function(){return i(t)}:null,children:[Object(c.jsx)("i",{children:t.icon?Object(c.jsx)("img",{src:t.icon,alt:"list icon"}):Object(c.jsx)(k,{color:t.color.name})}),Object(c.jsxs)("span",{children:[t.name,t.tasks&&" (".concat(t.tasks.length,")")]}),n&&Object(c.jsx)("img",{className:"list__remove-icon",src:p,alt:"",onClick:function(){return function(t){window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a ?")&&h.a.delete("http://localhost:3001/lists/"+t.id).then((function(){s(t.id)}))}(t)}})]},"".concat(t.name,"_").concat(e))}))})}),x=(n(59),n.p+"static/media/add.c4fa83e1.svg"),C=n.p+"static/media/close.b83c2023.svg",g=function(t){var e=t.colors,n=t.onAddList,a=s.a.useState(!1),i=Object(d.a)(a,2),o=i[0],l=i[1],r=s.a.useState(3),u=Object(d.a)(r,2),m=u[0],b=u[1],f=s.a.useState(""),p=Object(d.a)(f,2),v=p[0],g=p[1],w=s.a.useState(!1),_=Object(d.a)(w,2),N=_[0],L=_[1];s.a.useEffect((function(){Array.isArray(e)&&b(e[0].id)}),[e]);var T=function(){l(!1),g(""),b(e[0].id)};return Object(c.jsxs)("div",{className:"add-list",children:[Object(c.jsx)(O,{onClick:function(){return l(!0)},items:[{className:"list__add-button",icon:x,name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"}]}),o&&Object(c.jsxs)("div",{className:"add-list__popup",children:[Object(c.jsx)("img",{onClick:T,src:C,alt:"",className:"add-list__popup-close-btn"}),Object(c.jsx)("input",{value:v,onChange:function(t){return g(t.target.value)},className:"field",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043f\u043a\u0430"}),Object(c.jsx)("div",{className:"add-list__popup-colors",children:e.map((function(t){return Object(c.jsx)(k,{onClick:function(){return b(t.id)},color:t.name,className:m===t.id&&"active"},t.id)}))}),Object(c.jsxs)("button",{className:"button",onClick:function(){v?(L(!0),h.a.post("http://localhost:3001/lists",{name:v,colorId:m}).then((function(t){var c=t.data,a=e.filter((function(t){return t.id===m}))[0],s=Object(j.a)(Object(j.a)({},c),{},{color:a,tasks:[]});n(s),T()})).finally((function(){L(!1)}))):alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430")},children:[" ",N?"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"," "]})]})]})},w=(n(60),n.p+"static/media/edit.1bda04de.svg"),_=function(t){var e=t.list,n=t.onAddTask,a=s.a.useState(!1),i=Object(d.a)(a,2),o=i[0],l=i[1],r=s.a.useState(""),u=Object(d.a)(r,2),j=u[0],m=u[1],b=s.a.useState(""),f=Object(d.a)(b,2),p=f[0],v=f[1],k=function(){l(!o),m("")};return Object(c.jsx)("div",{className:"tasks__form",children:o?Object(c.jsxs)("div",{className:"tasks__form-block",children:[Object(c.jsx)("input",{className:"field",type:"text",placeholder:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438",onChange:function(t){return m(t.target.value)}}),Object(c.jsxs)("button",{disabled:p,className:"button",onClick:function(){var t={listId:e.id,text:j,completed:!1};v(!0),h.a.post("http://localhost:3001/tasks",t).then((function(t){var c=t.data;n(e.id,c),k()})).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u0434\u0430\u0447\u0438 !")})).finally((function(){v(!1)}))},children:[" ",p?"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"," "]}),Object(c.jsx)("button",{className:"button button--grey",onClick:k,children:" \u041e\u0442\u043c\u0435\u043d\u0430 "})]}):Object(c.jsxs)("div",{onClick:k,className:"tasks__form-new",children:[Object(c.jsx)("img",{src:x,alt:""}),Object(c.jsx)("span",{children:" \u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0432\u0430\u0447\u0430 "})]})})},N=function(t){var e=t.id,n=t.text,a=t.completed,s=t.list,i=t.onRemove,o=t.onEdit,l=t.onComplete;return Object(c.jsxs)("div",{className:"tasks__item-row",children:[Object(c.jsxs)("div",{className:"checkbox",children:[Object(c.jsx)("input",{onChange:function(t){l(s.id,e,t.target.checked)},id:"task-".concat(e),type:"checkbox",checked:a}),Object(c.jsx)("label",{htmlFor:"task-".concat(e),children:Object(c.jsx)("svg",{width:"11",height:"8",viewBox:"0 0 11 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{d:"M9.29999 1.20001L3.79999 6.70001L1.29999 4.20001",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),Object(c.jsx)("input",{readOnly:!0,value:n}),Object(c.jsxs)("div",{className:"tasks__item-row-actions",children:[Object(c.jsx)("div",{onClick:function(){return o(s.id,{id:e,text:n})},children:Object(c.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{d:"M0 12.0504V14.5834C0 14.8167 0.183308 15 0.41661 15H2.9496C3.05792 15 3.16624 14.9583 3.24123 14.875L12.34 5.78458L9.21542 2.66001L0.124983 11.7504C0.0416611 11.8338 0 11.9337 0 12.0504ZM14.7563 3.36825C14.8336 3.29116 14.8949 3.1996 14.9367 3.0988C14.9785 2.99801 15 2.88995 15 2.78083C15 2.6717 14.9785 2.56365 14.9367 2.46285C14.8949 2.36205 14.8336 2.27049 14.7563 2.19341L12.8066 0.24367C12.7295 0.166428 12.638 0.105146 12.5372 0.0633343C12.4364 0.021522 12.3283 0 12.2192 0C12.1101 0 12.002 0.021522 11.9012 0.0633343C11.8004 0.105146 11.7088 0.166428 11.6318 0.24367L10.107 1.76846L13.2315 4.89304L14.7563 3.36825V3.36825Z",fill:"black"})})}),Object(c.jsx)("div",{onClick:function(){return i(s.id,e)},children:Object(c.jsx)("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{d:"M6.87215 5.5L10.7129 1.65926C10.8952 1.47731 10.9977 1.23039 10.9979 0.972832C10.9982 0.715276 10.8961 0.468178 10.7141 0.285898C10.5321 0.103617 10.2852 0.00108525 10.0277 0.000857792C9.77011 0.000630336 9.52302 0.102726 9.34074 0.284685L5.5 4.12542L1.65926 0.284685C1.47698 0.102404 1.22976 0 0.971974 0C0.714191 0 0.466965 0.102404 0.284685 0.284685C0.102404 0.466965 0 0.714191 0 0.971974C0 1.22976 0.102404 1.47698 0.284685 1.65926L4.12542 5.5L0.284685 9.34074C0.102404 9.52302 0 9.77024 0 10.028C0 10.2858 0.102404 10.533 0.284685 10.7153C0.466965 10.8976 0.714191 11 0.971974 11C1.22976 11 1.47698 10.8976 1.65926 10.7153L5.5 6.87458L9.34074 10.7153C9.52302 10.8976 9.77024 11 10.028 11C10.2858 11 10.533 10.8976 10.7153 10.7153C10.8976 10.533 11 10.2858 11 10.028C11 9.77024 10.8976 9.52302 10.7153 9.34074L6.87215 5.5Z",fill:"black"})})})]})]})},L=function(t){var e=t.list,n=t.onEditTitle,a=t.onAddTask,s=t.withoutEmpty,i=t.onEditTask,o=t.onRemoveTask,l=t.onCompleteTask;return Object(c.jsxs)("div",{className:"tasks",children:[Object(c.jsxs)("h2",{style:{color:e.color.hex},className:"tasks__title",children:[e.name,Object(c.jsx)("img",{onClick:function(){var t=window.prompt("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430",e.name);t&&(n(e.id,t),h.a.patch("http://localhost:3001/lists/"+e.id,{name:t}).catch((function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430")})))},src:w,alt:"Edit icon"})]}),Object(c.jsxs)("div",{className:"tasks__item",children:[!s&&e.tasks&&!e.tasks.length&&Object(c.jsx)("h2",{children:" \u0417\u0430\u0434\u0430\u0447\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 "}),e.tasks&&e.tasks.map((function(t){return Object(c.jsx)(N,Object(j.a)(Object(j.a)({},t),{},{list:e,onEdit:i,onRemove:o,onComplete:l}),t.id)})),Object(c.jsx)(_,{list:e,onAddTask:a},e.id)]})]})},T=n.p+"static/media/list.2b422bc7.svg";var E=function(){var t=s.a.useState(null),e=Object(d.a)(t,2),n=e[0],a=e[1],i=s.a.useState(null),o=Object(d.a)(i,2),l=o[0],j=o[1],m=s.a.useState(null),b=Object(d.a)(m,2),f=b[0],p=b[1],v=Object(u.e)(),k=Object(u.f)();s.a.useEffect((function(){h.a.get("http://localhost:3001/lists?_expand=color&_embed=tasks").then((function(t){var e=t.data;a(e)})),h.a.get("http://localhost:3001/colors").then((function(t){var e=t.data;j(e)}))}),[]);var x=function(t,e){var c=n.map((function(n){return n.id===t&&(n.tasks=[].concat(Object(r.a)(n.tasks),[e])),n}));a(c)},C=function(t,e,c){var s=n.map((function(n){return n.id===t&&(n.tasks=n.tasks.map((function(t){return t.id===e&&(t.completed=c),t}))),n}));a(s),h.a.patch("http://localhost:3001/tasks/"+e,{completed:c}).catch((function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443")}))},w=function(t,e){var c=n.map((function(n){return n.id===t&&(n.name=e),n}));a(c)},_=function(t,e){var c=window.prompt("\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438",e.text);if(c){var s=n.map((function(n){return n.id===t&&(n.tasks=n.tasks.map((function(t){return t.id===e.id&&(t.text=c),t}))),n}));a(s),h.a.patch("http://localhost:3001/tasks/"+e.id,{text:c}).catch((function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443")}))}},N=function(t,e){if(window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443 ?")){var c=n.map((function(n){return n.id===t&&(n.tasks=n.tasks.filter((function(t){return t.id!==e}))),n}));a(c),h.a.delete("http://localhost:3001/tasks/"+e).catch((function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443")}))}};return s.a.useEffect((function(){var t=v.location.pathname.split("lists/")[1];if(n){var e=n.find((function(e){return e.id===Number(t)}));p(e)}}),[n,k.pathname]),Object(c.jsxs)("div",{className:"todo",children:[Object(c.jsxs)("div",{className:"todo__sidebar",children:[Object(c.jsx)(O,{onClickItem:function(t){v.push("/")},items:[{active:!f,icon:T,name:"\u0412\u0441\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"}]}),n?Object(c.jsx)(O,{items:n,isRemovable:!0,onRemove:function(t){var e=n.filter((function(e){return e.id!==t}));a(e)},onClickItem:function(t){v.push("/lists/".concat(t.id))},activeItem:f}):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",Object(c.jsx)(g,{onAddList:function(t){var e=[].concat(Object(r.a)(n),[t]);a(e)},colors:l})]}),Object(c.jsxs)("div",{className:"todo__tasks",children:[Object(c.jsx)(u.a,{exact:!0,path:"/",children:n&&n.map((function(t){return Object(c.jsx)(L,{list:t,onAddTask:x,onEditTitle:w,onRemoveTask:N,onEditTask:_,onCompleteTask:C,withoutEmpty:!0},t.id)}))}),Object(c.jsx)(u.a,{path:"/lists/:id",children:n&&f&&Object(c.jsx)(L,{list:f,onAddTask:x,onEditTitle:w,onRemoveTask:N,onEditTask:_,onCompleteTask:C})})]})]})};n(66);o.a.render(Object(c.jsx)(l.a,{basename:"/todo",children:Object(c.jsx)(E,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.f9e72b24.chunk.js.map